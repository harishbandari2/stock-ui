<div class="page-header page-header-light" *ngIf="!portfolioId">
  <div class="page-header-content header-elements-md-inline">
    <div class="page-title d-flex  justify-content-sm-between flex-sm-wrap">
      <div class="d-flex align-items-center mb-3 mb-sm-0">
        <div id="campaigns-donut">
          <svg width="42" height="42">
            <g transform="translate(21,21)">
              <g class="d3-arc d3-slice-border" style="cursor: pointer;">
                <path
                  d="M1.1634144591899855e-15,19A19,19 0 0,1 -14.050144241469582,12.790365389381929L-7.025072120734791,6.3951826946909645A9.5,9.5 0 0,0 5.817072295949927e-16,9.5Z"
                  style="fill: rgb(102, 187, 106);"
                ></path>
              </g>
              <g class="d3-arc d3-slice-border" style="cursor: pointer;">
                <path
                  d="M-14.050144241469582,12.790365389381929A19,19 0 0,1 0.6493373977393208,-18.988900993577726L0.3246686988696604,-9.494450496788863A9.5,9.5 0 0,0 -7.025072120734791,6.3951826946909645Z"
                  style="fill: rgb(149, 117, 205);"
                ></path>
              </g>
              <g class="d3-arc d3-slice-border" style="cursor: pointer;">
                <path
                  d="M0.6493373977393208,-18.988900993577726A19,19 0 0,1 5.817072295949928e-15,19L2.908536147974964e-15,9.5A9.5,9.5 0 0,0 0.3246686988696604,-9.494450496788863Z"
                  style="fill: rgb(255, 112, 67);"
                ></path>
              </g>
            </g>
          </svg>
        </div>
        <div class="ml-3">
          <h5 class="font-weight-semibold mb-0">
            Total Algos {{ algoList?.length }}
            <!-- <span class="text-danger font-size-sm font-weight-normal"> ({{ portfolio.netchange }}%)</span> -->
          </h5>
          <span class="badge badge-mark border-success mr-1"></span>
          <span class="text-muted">Active Algos {{ activeAlgos }}</span>
        </div>
      </div>
    </div>

    <div class="d-flex align-items-center mb-3 mb-sm-0">
      <i class="icon-stats-growth icon-2x text-muted"></i>
      <div class="ml-3">
        <h5
          [class]="
            portfolio?.MTM > -1 ? 'text-success font-weight-semibold mb-0' : 'text-danger font-weight-semibold mb-0'
          "
        >
          {{ portfolio.MTM | number: '1.2-2' }}
          <span class="text-success font-size-sm font-weight-normal"> ({{ portfolio.netchange }}%)</span>
        </h5>
        <span class="badge badge-mark border-danger mr-1"></span> <span class="text-muted">Total MTM</span>
      </div>
    </div>
    <!-- <div class="page-title d-flex">
      <h4><span class="font-weight-semibold">Strategies</span></h4>
       <a class="header-elements-toggle text-default d-md-none"><i class="icon-more"></i></a>
    </div> -->

    <div class="header-elements ">
      <div class="d-flex justify-content-center">
        <button
          style="padding: 4px 12px;"
          type="button"
          routerLink="/create"
          class="btn btn-outline alpha-indigo text-indigo-800 border-indigo-600"
        >
          <i class="icon-plus2 mr-2"></i> Create
        </button>
      </div>
    </div>
  </div>

  <!-- <div class="breadcrumb-line breadcrumb-line-light header-elements-md-inline">
    <div class="d-flex">
      <div class="breadcrumb">
        <a href="index.html" class="breadcrumb-item"><i class="icon-home2 mr-2"></i> Home</a>
        <a href="widgets_content.html" class="breadcrumb-item">Widgets</a>
        <span class="breadcrumb-item active">Content</span>
      </div>

      <a class="header-elements-toggle text-default d-md-none"><i class="icon-more"></i></a>
    </div>

    <div class="header-elements d-none">
      <div class="breadcrumb justify-content-center">
        <button
          type="button"
          (click)="openModel(content)"
          class="btn btn-outline alpha-success text-success-800 border-success-600"
        >
          <i class="icon-plus2 mr-2"></i> Application
        </button>
      </div>
    </div>
  </div> -->
</div>

<div class="content">
  <!-- Dashboard content -->
  <div class="row">
    <div class="col-xl-12">
      <!-- Marketing campaigns -->
      <div class="card">
        <ng-container *ngIf="portfolioId">
          <div class="card-header header-elements-sm-inline">
            <h6 class="card-title">{{ portfolio?.name }} Algos</h6>
            <div class="header-elements">
              <span class="badge badge-success badge-pill">{{ activeAlgos }} active</span>
              <!-- <div class="list-icons ml-3">
                <div class="dropdown">
                  <a href="#" class="list-icons-item dropdown-toggle" data-toggle="dropdown"
                    ><i class="icon-menu7"></i
                  ></a>
                  <div class="dropdown-menu dropdown-menu-right">
                    <a href="#" class="dropdown-item"><i class="icon-sync"></i> Update data</a>
                    <a href="#" class="dropdown-item"><i class="icon-list-unordered"></i> Detailed log</a>
                    <a href="#" class="dropdown-item"><i class="icon-pie5"></i> Statistics</a>
                    <div class="dropdown-divider"></div>
                    <a href="#" class="dropdown-item"><i class="icon-cross3"></i> Clear list</a>
                  </div>
                </div>
              </div> -->
            </div>
          </div>

          <div class="card-body d-sm-flex align-items-sm-center justify-content-sm-between flex-sm-wrap">
            <div class="d-flex align-items-center mb-3 mb-sm-0">
              <div id="campaigns-donut">
                <svg width="42" height="42">
                  <g transform="translate(21,21)">
                    <g class="d3-arc d3-slice-border" style="cursor: pointer;">
                      <path
                        d="M1.1634144591899855e-15,19A19,19 0 0,1 -14.050144241469582,12.790365389381929L-7.025072120734791,6.3951826946909645A9.5,9.5 0 0,0 5.817072295949927e-16,9.5Z"
                        style="fill: rgb(102, 187, 106);"
                      ></path>
                    </g>
                    <g class="d3-arc d3-slice-border" style="cursor: pointer;">
                      <path
                        d="M-14.050144241469582,12.790365389381929A19,19 0 0,1 0.6493373977393208,-18.988900993577726L0.3246686988696604,-9.494450496788863A9.5,9.5 0 0,0 -7.025072120734791,6.3951826946909645Z"
                        style="fill: rgb(149, 117, 205);"
                      ></path>
                    </g>
                    <g class="d3-arc d3-slice-border" style="cursor: pointer;">
                      <path
                        d="M0.6493373977393208,-18.988900993577726A19,19 0 0,1 5.817072295949928e-15,19L2.908536147974964e-15,9.5A9.5,9.5 0 0,0 0.3246686988696604,-9.494450496788863Z"
                        style="fill: rgb(255, 112, 67);"
                      ></path>
                    </g>
                  </g>
                </svg>
              </div>
              <div class="ml-3">
                <h5 class="font-weight-semibold mb-0">
                  {{ portfolio.margin ? portfolio.margin : (0 | number: '1.2-2') }}
                  <span class="text-danger font-size-sm font-weight-normal"> ({{ portfolio.netchange }}%)</span>
                </h5>
                <span class="badge badge-mark border-success mr-1"></span>
                <span class="text-muted">Total Margin</span>
              </div>
            </div>

            <div class="d-flex align-items-center mb-3 mb-sm-0">
              <i class="icon-stats-growth icon-2x text-muted"></i>
              <div class="ml-3">
                <h5
                  [class]="
                    portfolio?.MTM > -1
                      ? 'text-success font-weight-semibold mb-0'
                      : 'text-danger font-weight-semibold mb-0'
                  "
                >
                  {{ portfolio.MTM | number: '1.2-2' }}
                  <span class="text-success font-size-sm font-weight-normal"> ({{ portfolio.netchange }}%)</span>
                </h5>
                <span class="badge badge-mark border-danger mr-1"></span> <span class="text-muted">Total MTM</span>
              </div>
            </div>

            <div>
              <button
                style="padding: 4px 12px;"
                type="button"
                routerLink="/create"
                class="btn btn-outline alpha-indigo text-indigo-800 border-indigo-600"
              >
                <i class="icon-plus2 mr-2"></i> Create
              </button>
            </div>
          </div>
        </ng-container>

        <div class="table" style="min-height: 320px;">
          <table class="table text-nowrap">
            <thead>
              <tr class="table-active">
                <th style="width: 10%;">Enable</th>
                <th style="width: 10%;">Status</th>
                <th style="width: 20%;">Broker</th>
                <th style="width: 15%;">Strategy</th>
                <th style="width: 15%;">MTM</th>
                <th style="width: 10%;">Days</th>
                <th style="text-align: center;">Alert</th>
                <th class="text-center" style="width: 20px;">Actions</th>
              </tr>
            </thead>
            <tbody>
              <!-- <tr>
                <td>
                  <div class="" style="display: flex;align-items:center">
                    <select class="form-control" [ngModel]="currentDay" style="width: 100px;height:34px;">
                      <option value="1">Monday </option>
                      <option value="2">Tuesday</option>
                      <option value="3">Wedday </option>
                      <option value="4">Thursday</option>
                      <option value="5">Friday</option>
                      <option value="6">Saturday</option>
                      <option value="0">Sunday</option>
                    </select>
                  </div>
                </td>
                <td colspan="5"></td>
                <td class="text-left"></td>
              </tr> -->
              <tr *ngFor="let algo of algoList; let i = index; trackBy: identify">
                <td>
                  <ng-toggle
                    [(ngModel)]="algo.enable"
                    [width]="38"
                    [height]="14"
                    [margin]="-3"
                    [color]="{
                      unchecked: '#b0b0b0',
                      checked: '#92aaeb'
                    }"
                    [switchColor]="{
                      checked: '#2554d6',
                      unchecked: '#817979'
                    }"
                    [values]="{
                      unchecked: false,
                      checked: true
                    }"
                    (change)="update(algo, i)"
                  ></ng-toggle>
                </td>
                <td>
                  <span class="status text-muted" *ngIf="algo.status === 'DISABLED'">Disabled</span>
                  <span class="status text-indigo" *ngIf="algo.status === 'ENABLED'">Enabled</span>
                  <span class="status text-warning" *ngIf="algo.status === 'RUNNING'">Running</span>
                  <span class="status text-success" *ngIf="algo.status === 'ACTIVE'">Trade Active</span>
                  <span class="status text-danger" *ngIf="algo.status === 'CLOSED'">Trade Closed</span>
                </td>
                <td>
                  <span> {{ algo.brokers && algo.brokers.length > 0 ? algo.brokers[0].name : 'Paper' }}</span>
                </td>
                <td>
                  <div class="d-flex align-items-center">
                    <!-- <div class="mr-3">
                      <div class="bg-success bg-opacity-10 text-success lh-1 rounded-pill p-2">
												<i class="ph-arrow-clockwise"></i>
											</div>
                    </div> -->
                    <div>
                      <a
                        class="pointer"
                        style="font-size: 14px;"
                        style="font-size:14px; color:#2554d6; text-decoration: underline;"
                        routerLink="/trades/{{ algo._id }}"
                        >{{ algo.name }}</a
                      >
                      <div class="text-muted font-size-sm">
                        <!-- <span class="bi bi-dot"></span> -->
                        {{ algo.type | titlecase }}
                      </div>
                    </div>
                  </div>
                </td>
                <td>
                  <h6
                    *ngIf="algo?.MTM || algo.MTM == 0"
                    class="font-weight-semibold mb-0"
                    [class]="algo.MTM > -1 ? 'text-success' : 'text-danger'"
                  >
                    <i class="bi bi-currency-rupee"></i
                    >{{ algo.MTM || algo.MTM == 0 ? (algo.MTM | number: '1.2-2') : '-' }}
                  </h6>
                </td>
                <td>
                  <span
                    *ngFor="let day of algo.days; let last = last; trackBy: identify"
                    [class]="day.id == currentDay ? 'text-success-800' : 'text-muted'"
                  >
                    {{ day.name | slice: 0:2 }}{{ last ? '' : ',' }}
                  </span>
                </td>
                <td class="text-center">
                  <span class="text-muted ">{{ algo.alert ? algo.alert : '-' }}</span>
                </td>

                <td class="text-center">
                  <ul class="list-inline mb-0 mt-2 mt-sm-0 pointer">
                    <li class="list-inline-item dropdown" ngbDropdown>
                      <a class="text-default dropdown-toggle" data-toggle="dropdown" ngbDropdownToggle
                        ><i class="icon-menu7"></i
                      ></a>

                      <div class="dropdown-menu dropdown-menu-right" ngbDropdownMenu>
                        <a class="dropdown-item" routerLink="/create/{{ algo._id }}"
                          ><i class="icon-pencil7"></i> Edit
                        </a>
                        <a class="dropdown-item" (click)="deleteAlgo(algo)"><i class="icon-cross2"></i>Delete</a>
                      </div>
                    </li>
                  </ul>
                </td>
              </tr>
              <td *ngIf="algoList.length < 1" colspan="8">
                <img
                  class="mb-2"
                  style="display: block; margin-left: auto; margin-right: auto;"
                  src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKNElEQVR4nO1de2wcxRm/lraCVq1a+paoKpWqVelfVaoKInsnTnwzF8dOAomB0JBAQigQIC2QFtEqcVtoKyAtRlWl/AEpICrqeOf8zsPYJpGLk9TkQV4OjR8hJrHjV2zHb5+n+uZ8dHu3e7ezty/75ietZJ33MTO/nfl9833fzAYCEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISziIrVPLVbKJuVohaCQf8Db/JdncRtxaW3KAEwwUI0xJE6CQilGkPBdNpBdNaBavrFi4v+7wkxwEUFpZch0hproLp6wirQ/EkGB0KoWPQc1CIFt5SWPIZSU6ayMHhBQjTYoWoXWZJMDyw2s8JJaW5gQD7hCTHJJRc+gNE1CKFqP9JmwTDQ/2QEx3a/SNJjA5QSL0JEbpVIfR4uo29+qd72KKQ+fNnn7kVypDR5CAU/iIIL7eQMJ226+2va7jIuq+Mst3h82zjI3UCQxqNKIQ2KoRuyRhLDaFd14OFNCvOI04MR3UNF5kW7R2DbNcbZ9hd6/aa7zVYHY++KOq6YHDf5wLzCtu3fxKFaBYi6k6E1UHndIHqEhJDZGaGvX+ql738txOsoLBKpOeMgokNL9KCBTs/HZiryCG7f4gI/RPC9JLTJCAThGgxORlh/2q6zJ57vpmR5eUCeqP28hcrRLPmhKWWk1f6bQWrv1Kw2uImCUiQEC2GhyfZ3toL7Olt77KcpWGBYY12wAuXQ8q+H/ATliyhX1Zw+EEQRETUGa+IQBYJ0aKnN2oMbH7igNhzsXoaXsRson7TExIW5Fd8Fma/sz6kKa9JQDYRokX7hSFuDKy5b5+4pYbDD/4kVPMFx4lQSDibCxyhY143PHKYkBhmZhg7cbKX7Sg+xgpWmzcGoj41dQBhtcIRvQETEN4ArxscuUyIFpNTEdbYdIkVPXeY4QLzxgAi9LStZNwWVL+mEHXA68ZGHhOixbWRKVZZ08bybq8wVa6cEL3ZNkIQUf/udUMjHxGy/+0L7IFH6tmipebLpWC61xYysnF4oR+sJ+QxIUeau9nPf3mQLVlWZrlsMLlMOw6hEPVY/I03/+IdtnbD/nlPSFvHENv27GEWWmFuWIod0DbQRon/U9sgwGaZEITVx+Jvmr+qkg1cHf/YT7TzlVPsjjU184aQvv4x9tJfj7OVd1cLPRfcMS8WH+XuGbDMBgcn2HJdF41aZKuQl1e1GfqJoEBmRc5PhIyPT7PX3mxha9YLzDkI5ZbW9mcPczfM1FQk4b5llW26jsuspfR7tgj5ps31LBKZSVq5iYlpXkAoaG4a4y1ymJCpSISVVbayjQ/XsZyQeZcJuFeeeLqRu1tGR6eSPgNe1Iceb0hf4PWEHAp9+mwfE8HQrJ8IKiASNEIOEtL47kdsy1Zxcd70aD13q/QPRIdrs2g5169LuGmBNxLyF146ytLBlZ6onwh6mduEnGnpZ7/53SEhzy4c6zfVcvfJR5eupVX35/9yVO/+F8AFZUnIwWUQE3I7EAsaCfmJiBghl7tG+EuUL+DugGPVPXt4zAQ00S4MDlkUeEMhr04UcjsAY+yxEz38DQLrDdlAyFPPNLJVa2rYIoFr4NlQBigLlMkJQBsmDFuEjiWdwesK+aOphdwO/F/QaIXY0GLlyM0v4zEQ0Lix8WnH68cFfouAwBsJ+Zmz/cxtXLv2v6DR4jzzFlCqA+oDsQ7QsquDE67X69wHA+YE3kjIweXsNXp6x6wFjXTE+dLlEa+rw+dqKQXeSMi9eIuSoWM2aHTP/amNgcK1UXH+4PwA8xNSCjzkvCpY7Yk/AWbcwObx950TOquYmWHsmaImQzLgfz4rMm9DaEtDbwZWR3gvyVpS+h0zbxv4rFrbB5kfcA7G4iQJCfA/OMcPgDaDtoM2TK1x9OaYfjSbHY/v/9nb7M1/nmNd3d6MxxEDayX+gHO86tnQNtBG0FZm2xU4AC74sHUrLrmRJx/rDF3JLJbHnzrIKqrb+bjoFqr2tOvOI/TmMXCuW4A2gLaANhHxjfE2x7QYOEi6DkMhdNiKw21sbNrRSq+4M9EtTitaGS1vZW4bJlYdqZbWrUAgJZbqo7dSyYxLenra3iFjR/Ex3SEUngOTVwirxv9/x8v2mu5WQw08C2U2RSjtlV3QnRQLKaHxQRu7hXxRiHLLJYaTp/sSvMp2TW7TCcYphHYtXlz+9YCdUAg9q31IMF/MvQHZ51ChDzuHbRPyP77YnHAu/Kbr/rHwRsTE+d4HaoXdMnGEnLWVDD1CoJAxr+3d682n+sdmzlBRCJdadczl3V7BevsSr4d4xTIdgQfBFRFn8AyIxHC0XuJ4Al0jRC/VX090jQ4YgqDi0AAjBtG3QYOZLYi4EdSy80ICPz4xzRoOdnLfmUjgCogHZ2i8XnpOiB1e22BBOW8QaBhtfFrP93PfrJAbAQReb/WU1jcH5zQf7eblDK2ssNVL7CtC4r22e/ZHQ7giqf7LC6t45kfNvo4Emx6GkZMmgkdwjp7Awz3h3vr+JOOeDHWAukCdUsG3hGgBaTFWxmZkQsiN8IcXEgXeitbpadWcJ0TPehFNtsszEHIj9PfrC3yy4857Z63Bi+LW4JwlxKp9X1p2Xvj+EEtxc7405wnRiuyR5m4+JOnNgDc8XGdp5g/XwLV6vQ2eBc+0O0Q9LwiJN0PrD3TyuAaY0Y89eSCtVBy4Fu4B94J7wr3hGU5h3hEy1yEJ8RkkIT6DJMRnyGhC+vrH2Ov/aOGHWWel08hYQkZGp/hETjupS7VEwA1kLCFNRy4nzC8OHenyuliZS0hdw0XPlkUngySESEJkD0kC2UOI7CGyhySB7CFE9hC2duN+5jXqfGplQdu4bvbauUp1PhDSk2Q3OmcIwfRUqsTrypp2vjY9UwgZGp7kdU6VYA1t5wAh6q5UodBYmgwEgSCdx8kgkFeEQIL1Owc72a9/25SQoWhICKGv2k5I1rKqLyFC3xJJvI6FSf/9nv1hUjcJieVw8fDyHUJJE9BWb0Hb2U6Ilhi+RTimtSL7aNmdSOAGIVYTrGHxDWxZDuv+A24iG4e/BQ9GmL7ndqqNU4RYTbCGrWJh4SbC5d8N+Gcna7UIEdrqRjKanYRYTbBWMO2E1U/Rna79vtc7FBTTK6KL+iuq2/kGk04TYjXBGrYe4SvMguGCj9cEzhVYXSIX1CRew9asdhFiNcF6Xn46yeoSuWWalP94S80sIbD6CpZKrLyr2r+7VHuJ6BI58f3iV8VtnZSMkHaBXR/09nFHeSXfCGQirH5RYf2mWrbt94cSfocJ24aHBL6sE12a3KJgus03FpJfgHJ3/1gh9M9ufHNkzn0LxBfGAKGvKoRetY8EejVmISHU8Cmv6zlnv1uFgupqhCmFLVaFSYBrMKX8HmjX9V7XZ9592S07FN6ICK1P+qUGzRfXUH7FV7wud0YAhdSbFFz6pIJpj3bfEPgt479J6DWycXihQuhtXpfDDvwXirx7D7uRK88AAAAASUVORK5CYII="
                />
                <span
                  style="display: flex; margin-left: auto; margin-right: auto;text-align: center; justify-content: center;"
                  routerLink="/create"
                  class="statusbg"
                >
                  <i class="icon-plus2 mr-2"></i> Create
                </span>
              </td>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  <!-- /dashboard content -->
</div>
